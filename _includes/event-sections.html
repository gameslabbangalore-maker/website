<article class="content">
  {% assign about_copy = page.about | default: nil %}
  {% assign has_sections = false %}

  {% if about_copy or content %}
  <section id="details" aria-labelledby="about">
    <h3 id="about" class="section-title">About the Event</h3>
    <div class="prose">
      {% if about_copy %}
        {{ about_copy | markdownify }}
      {% endif %}
      {% if content %}
        {{ content }}
      {% endif %}
    </div>
  </section>
  {% assign has_sections = true %}
  {% endif %}

  {% if page.what_makes_it_different %}
  {% if has_sections %}<div class="divider section-divider" aria-hidden="true"></div>{% endif %}
  <section id="what-makes-it-different" aria-labelledby="what-makes-title">
    <h3 id="what-makes-title" class="section-title">What makes it different?</h3>
    <div class="prose">{{ page.what_makes_it_different | markdownify }}</div>
  </section>
  {% assign has_sections = true %}
  {% endif %}

  {% if page.how_it_works %}
  {% if has_sections %}<div class="divider section-divider" aria-hidden="true"></div>{% endif %}
  <section id="how-it-works" aria-labelledby="how-it-works-title">
    <h3 id="how-it-works-title" class="section-title">How it works</h3>
    <div class="prose">{{ page.how_it_works | markdownify }}</div>
  </section>
  {% assign has_sections = true %}
  {% endif %}

  {% if page.why_join %}
  {% if has_sections %}<div class="divider section-divider" aria-hidden="true"></div>{% endif %}
  <section id="why-join" aria-labelledby="why-join-title">
    <h3 id="why-join-title" class="section-title">Why join?</h3>
    <div class="prose">{{ page.why_join | markdownify }}</div>
  </section>
  {% assign has_sections = true %}
  {% endif %}

  {% if page.closing %}
  {% if has_sections %}<div class="divider section-divider" aria-hidden="true"></div>{% endif %}
  <div class="prose closing-note">{{ page.closing | markdownify }}</div>
  {% assign has_sections = true %}
  {% endif %}

  {% assign about_video_url = page.about_video | to_s | strip %}
  {% if about_video_url != '' %}
  {% if has_sections %}<div class="divider section-divider" aria-hidden="true"></div>{% endif %}
  <section id="about-video" aria-labelledby="about-nom">
    <h3 id="about-nom" class="section-title">About {{ page.title }}</h3>
    <div class="video-portrait" data-embed="{{ about_video_url | escape }}">
      <iframe loading="lazy" title="About {{ page.title }} (portrait)" src="{{ about_video_url | escape }}"></iframe>
    </div>
  </section>
  {% assign has_sections = true %}
  {% endif %}

  {% if page.recap_videos and page.recap_videos.size > 0 %}
  <div class="divider section-divider" aria-hidden="true"></div>
  <section id="recaps" aria-labelledby="recaps-title">
    <h3 id="recaps-title" class="section-title">Event recaps</h3>
    <p class="contact-sub" style="margin:0 0 18px; text-align:left;">CATCH THE VIBE OF THE EVENT WITH THESE VIDEOS</p>
    <div class="recap-grid-portrait">
      {% for vid in page.recap_videos %}
      <div class="video-portrait" data-embed="{{ vid | escape }}">
        <iframe loading="lazy" title="Recap {{ forloop.index }}" src="{{ vid | escape }}"></iframe>
      </div>
      {% endfor %}
    </div>
  </section>
  {% assign has_sections = true %}
  {% endif %}

  {% assign script_offer = page.script_offer %}
  {% if script_offer and script_offer.text and script_offer.cta_label and script_offer.cta_url %}
    {% if has_sections %}<div class="divider section-divider" aria-hidden="true"></div>{% endif %}
    <section class="script-offer" aria-labelledby="script-offer-title">
      <div class="script-offer__content">
        <h3 id="script-offer-title" class="section-title">Host your own Murder Mystery</h3>
        <p class="script-offer__text">{{ script_offer.text }}</p>
        <a class="script-offer__cta book-btn" href="{{ script_offer.cta_url | relative_url }}">{{ script_offer.cta_label }}</a>
      </div>
    </section>
    {% assign has_sections = true %}
  {% endif %}
</article>
