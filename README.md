# Games Lab Website

This repository contains the static site for Games Lab built with Jekyll. Event content lives in the `_events` collection and the homepage pulls its schedule from a generated data snapshot.

## Event schedule pipeline

Upcoming and unscheduled event cards are rendered from `_data/event_schedule.json`. The file is generated by `scripts/sync-events.mjs`, which reads:

1. The public Google Calendar ICS feed for scheduling (title, start/end time, location).
2. Event front matter from `_events/*.md` for hero assets, copy, and ticket links.
3. Location metadata in `_data/locations.yml` to turn raw calendar locations into display names and Google Maps URLs.

Run the sync locally whenever the calendar changes:

```bash
node scripts/sync-events.mjs
```

By default the script fetches the public calendar URL that is checked in. You can point it at a different feed or a saved ICS file:

```bash
node scripts/sync-events.mjs --ics-url "https://calendar.google.com/.../basic.ics"
node scripts/sync-events.mjs --ics path/to/local.ics
```

When the Google Calendar cannot be reached (for example, on a network that blocks Google), the script will still refresh `_data/event_schedule.json` with the latest event metadata and record the failure under the `warnings` field. The site will simply show every event in the "Explore" section until the feed is accessible again.

## Location matching

`_data/locations.yml` defines canonical display names and Google Maps links. Each entry can list multiple `aliases` that help the sync script match calendar locations even if they contain slight spelling variations or additional address text. If a calendar entry does not match any configured location, the site falls back to the raw string and leaves the map link empty while emitting a warning in the generated JSON.

## Adding events

1. Create a new markdown file in `_events/` with the event front matter (title, slug, banner, intro, highlights, ticket link, etc.).
2. Add or update location metadata in `_data/locations.yml` if the venue is new.
3. Publish or update the Google Calendar event with a summary that matches the event title.
4. Run `node scripts/sync-events.mjs` and commit the updated `_data/event_schedule.json`.

The homepage will automatically show the event in the "Upcoming" section once the calendar entry is in the future; otherwise, it remains in "Explore Our Other Events." Event detail pages also read the same schedule snapshot, so CTAs, location, and calendar links always reflect the latest data without fetching Google Sheets in the browser.
